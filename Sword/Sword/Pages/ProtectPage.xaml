<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Sword.ProtectPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Sword"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent">

    <!-- 支持滑条，不然显示不完全 -->
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>


            <!-- 顶部菜单 -->
            <MenuBar Grid.Row="0" Grid.Column="0" Margin="10,5,0,0">
                <MenuBarItem x:Name="Menu_ChooseACLFolder" Title="文件">
                    <MenuFlyoutItem x:Name="Menu_OpenACLFolder" Text="打开当前ACL文件夹" Click="Menu_OpenACLFolder_Click" />
                    <MenuFlyoutItem x:Name="Menu_OpenTargetFolder" Text="打开当前目标Mod文件夹" Click="Menu_OpenTargetFolder_Click" />
                    <MenuFlyoutSeparator />
                </MenuBarItem>

                <MenuBarItem 
    x:Name="Menu_ModEncryption" >
                    <MenuFlyoutItem 
        x:Name="Menu_ObfuscateAndEncryptBufferAndIni" 
        Click="Encryption_EncryptAll"/>
                    <MenuFlyoutItem 
        x:Name="Menu_EncryptBufferAndIni" 
        Click="Encryption_EncryptBufferAndIni"/>
                    <MenuFlyoutSeparator />
                    <MenuFlyoutItem 
        x:Name="Menu_Obfuscate" 
        Click="Encryption_ObfuscatePlay"/>
                    <MenuFlyoutSeparator />
                    <MenuFlyoutItem 
        x:Name="Menu_EncryptBuffer" 
        Click="Encryption_EncryptBuffer"/>
                    <MenuFlyoutItem 
        x:Name="Menu_EncryptIni" 
        Click="Encryption_EncryptIni"/>
                </MenuBarItem>

            </MenuBar>

            <StackPanel Orientation="Vertical" Margin="20" Grid.Row="1"  Grid.Column="0">
                <Expander
                HorizontalContentAlignment="Stretch"
                HorizontalAlignment="Stretch"
                IsExpanded="True">
                    <Expander.Header>
                        <StackPanel Margin="10">
                            <TextBlock Text="Mod锁机器码保护" FontSize="14" FontWeight="Bold" ToolTipService.ToolTip="把指定key文件列表代表的所有用户添加指定Mod中来锁机器码，防止出现倒卖、搬运、合购问题" />
                            <!--<TextBlock Text="" 
               FontSize="12" 
               TextWrapping="Wrap"/>-->
                        </StackPanel>
                    </Expander.Header>

                    <StackPanel Orientation="Vertical">

                        <StackPanel Grid.Row="0" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" VerticalAlignment="Top" Margin="10,10,0,10">
                            <TextBlock x:Name="TextBlock_ACLFolderPath" Text="ACL文件夹路径:" VerticalAlignment="Center" Margin="10,0,10,0" />
                            <TextBox x:Name="TextBox_ACLFolderPath" Width="400"  Margin="10,0,10,0" ></TextBox>
                            <Button x:Name="Button_SelectACLFolderPath" Content="选择文件夹" Click="Button_SelectACLFolderPath_Click" Margin="10,0,10,0"  ></Button>
                            <Button x:Name="Button_FlushKeyList" Content="刷新Key列表" Margin="10,0,10,0" Click="Button_FlushKeyList_Click"  ></Button>
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2" Orientation="Horizontal" VerticalAlignment="Top" Margin="10,10,0,10">
                            <TextBlock x:Name="TextBlock_TargetFolderPath" Text="目标Mod文件夹路径" VerticalAlignment="Center" Margin="10,0,10,0" />
                            <TextBox x:Name="TextBox_TargetFolderPath" Width="400"  Margin="10,0,10,0" ></TextBox>
                            <Button x:Name="Button_SelectTargetFolderPath" Content="选择文件夹" Click="Button_SelectTargetFolderPath_Click" Margin="10,0,10,0"  ></Button>
                            <Button x:Name="Button_AddProtect" Content="批量添加保护" Margin="10,0,10,0"  Click="Button_AddProtect_Click"></Button>
                        </StackPanel>

                        <ListBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" x:Name="MyListBox" MaxHeight="230" ItemsSource="{x:Bind MyStringList, Mode=OneWay}" Margin="20,20,20,15">
                            <ListBox.ItemTemplate>
                                <DataTemplate x:DataType="x:String">
                                    <TextBlock Text="{x:Bind}" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </StackPanel>
                </Expander>


                <Expander
                HorizontalContentAlignment="Stretch"
                HorizontalAlignment="Stretch"
                IsExpanded="True">
                    <Expander.Header>
                        <StackPanel Margin="10">
                            <TextBlock Text="根据UUID生成用户AES密钥文件" FontSize="14" FontWeight="Bold" ToolTipService.ToolTip="因为密钥生成器部分用户不愿意使用，此时可以使用UUID来生成密钥文件" />
                            <!--<TextBlock Text="" 
                            FontSize="12" 
                            TextWrapping="Wrap"/>-->
                        </StackPanel>
                    </Expander.Header>

                    <StackPanel Orientation="Vertical">

                        <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Top" Margin="10,10,0,10">
                            <TextBlock x:Name="TextBlock_UUIDTips" Text="根据UUID生成用户AES密钥文件" VerticalAlignment="Center" Margin="10,0,10,0" />
                        </StackPanel>

                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Top" Margin="10,10,0,10">
                            <TextBlock x:Name="TextBlock_UserName" Text="用户名" VerticalAlignment="Center" Margin="10,0,10,0" />
                            <TextBox x:Name="TextBox_UserName" Width="150"  Margin="10,0,10,0" ></TextBox>
                            <TextBlock x:Name="TextBlock_UUID" Text="UUID:" VerticalAlignment="Center" Margin="10,0,10,0" />
                            <TextBox x:Name="TextBox_UUID" Width="300"  Margin="10,0,10,0" ></TextBox>
                            <Button x:Name="Button_GenerateKeyFile" Content="生成AES密钥文件" Click="Button_GenerateKeyFile_Click" Margin="10,0,10,0"  ></Button>
                        </StackPanel>
                    </StackPanel>


                </Expander>

            </StackPanel>



        </Grid>

    </ScrollViewer>
</Page>
